{"version":3,"sources":["Main.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/Main","sourcesContent":["import GameScene from \"../Game/GameScene\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Main extends cc.Component {\n\n    @property(cc.Button)\n    m_logoutButton: cc.Button = null;\n    @property(cc.Node)\n    m_levelButtonsNode: cc.Node = null;\n    @property(cc.Node)\n    m_levelButtonInstance: cc.Node = null;\n\n    private m_levelButtonsArray: Array<cc.Node> = [];\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n\n    start () {\n        this.m_levelButtonInstance.active = false;\n        this.bindHanlder();\n        this.loadLevels();\n    }\n\n    // update (dt) {}\n\n    private bindHanlder()\n    {\n        let handler = new cc.Component.EventHandler();\n        handler.target = this.node;\n        handler.component = \"Main\"\n        handler.handler = \"logoutButtonCallBack\";\n        handler.customEventData = \"LogoutButton\";\n        this.m_logoutButton.clickEvents.push(handler);\n    }\n    private logoutButtonCallBack(event, customEventData)\n    {\n        cc.director.loadScene(\"Login\", function(){\n            // let nodeMain = cc.find(\"Canvas/node_main\", cc.director.getScene());\n            // this.mainPrefab = nodeMain.getComponent(\"MainPrefab\");\n\n            // this.turnToPage(Enum_LayerType.HOME_PAGE);\n\n            // cc.loader.loadRes(\"prefab/node_notice\", function(error, prefab){\n            //     LoadingPrefab.getInstance().remove();\n            //     if(error != null){\n            //         PromptPrefab.getInstance().showPrompt(TEXT.Common_Load_Failure);\n            //         return;\n            //     }\n\n            //     let node = cc.instantiate(prefab);\n            //     nodeMain.addChild(node);\n            //     node.zIndex = nodeMain.getChildByName(\"node_content\").zIndex + 1;\n            // });\n        }.bind(this));\n\n    }\n\n    private loadLevels()\n    {\n        let maxLength = 15;\n        let layoutHeight = 50;\n        for (let index = 0; index < maxLength; index++) {\n            let node = cc.instantiate(this.m_levelButtonInstance);\n            if (node)\n            {\n                node.getChildByName(\"Label\").getComponent(cc.Label).string = String(index + 1);\n                node.active = true;\n                this.m_levelButtonsArray.push(node);\n                this.m_levelButtonsNode.addChild(node);\n                layoutHeight += (this.m_levelButtonsNode.getComponent(cc.Layout).spacingY + node.height);\n                this.m_levelButtonsNode.height = layoutHeight;\n\n                //\n                let handler = new cc.Component.EventHandler();\n                handler.target = this.node;\n                handler.component = \"Main\"\n                handler.handler = \"levelButtonCallBack\";\n                handler.customEventData = \"Levels/Level_\" + index;\n                node.getComponent(cc.Button).clickEvents.push(handler);\n            }\n        }\n    }\n    private levelButtonCallBack(event, customEventData)\n    {\n        cc.log(customEventData);\n        cc.director.loadScene(\"GameScene\", function (error, prefab)\n        {\n            let gameSceneNode = cc.find(\"GameScene/GameSceneNode\", cc.director.getScene());\n            let gameSceneScript: GameScene = gameSceneNode.getComponent(\"GameScene\");\n            gameSceneScript.updateLevelJSONData(customEventData);\n        }.bind(this));\n    }\n\n}\n"]}